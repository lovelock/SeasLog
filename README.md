# SeasLog, PHP logging client written in C

[![Build Status](https://travis-ci.org/SeasX/SeasLog.svg?branch=master)](https://travis-ci.org/SeasX/SeasLog)[![Build status](https://ci.appveyor.com/api/projects/status/xkf8y7msk7kskon2?svg=true)](https://ci.appveyor.com/project/Neeke/seaslog)

SeasLog is a PHP logging client that makes it easy effective, fast and stable to making logs for PHP projects.

@author Chitao.Gao [neeke@php.net]

- Simple interfaces for writing, sending and counting logs

- High performance which is far better than alternatives

- Easy to configure both by changing `php.ini` and by SeasLog API

- Uses PSR-3 interfaces and can be replaced by other PSR-3 compatible libraries

- ...

```PHP
SeasLog::log(SEASLOG_ERROR,'this is a error test by ::log');
SeasLog::debug('this is a {userName} debug',array('{userName}' => 'neeke'));
SeasLog::info('this is a info log');
SeasLog::notice('this is a notice log');
SeasLog::warning('your {website} was down,please {action} it ASAP!',array('{website}' => 'github.com','{action}' => 'rboot'));
SeasLog::error('a error log');
SeasLog::critical('some thing was critical');
SeasLog::alert('yes this is a {messageName}',array('{messageName}' => 'alertMSG'));
SeasLog::emergency('Just now, the house next door was completely burnt out! {note}',array('{note}' => 'it`s a joke'));
```

## Help and docs

- [Documentation](http://php.net/SeasLog)
- [中文文档](https://github.com/SeasX/SeasLog/blob/master/README_zh.md)

## Installing SeasLog

The recommended way to install SeasLog is through [pecl](http://pecl.php.net/).

```bash
pecl install SeasLog # Be careful with cases of words
```

Next add the extension in `php.ini`

```ini
[SeasLog]
extension=seaslog.so
```

Feel free to compile SeasLog from source.

```bash
git clone https://github.com/SeasX/SeasLog.git
cd SeasLog
# require php-dev
phpize && ./configure && make && make install
```

And then add it to `php.ini` as the same with the mentioned above.

## Configuration

There're plenty of options available for various needs.

```ini
[SeasLog]
;configuration for php SeasLog module
extension = seaslog.so

;Default Log Base Path
seaslog.default_basepath = "/var/log/www"

;Default Logger Path
seaslog.default_logger = "default"

;The DateTime Style.  Default "Y-m-d H:i:s"
seaslog.default_datetime_format = "Y-m-d H:i:s"

;Default Log template. 
;Available pre-defined variables
; %L - Level.
; %M - Message.
; %T - DateTime. e.g. `2017-08-16 19:15:02`, affected by `seaslog.default_datetime_format`.
; %t - Timestamp. e.g. `1502882102.862`, accurate to milliseconds.
; %Q - RequestId. To distinguish a single request, such as not invoking the `SeasLog::setRequestId($string)` function，the unique value generated by the built-in `static char *get_uniqid ()` function is used when the request is initialized.
; %H - HostName.
; %P - ProcessId.
; %D - Domain:Port. e.g. `www.cloudwise.com:80`, the value would be `cli` if SeasLog runs in CLI mode.
; %R - Request URI. e.g. `/app/user/signin`; the value would be the name of the index script like `CliIndex.php`.
; %m - Request Method. e.g. `Get`; When Cli it's the command script, Such as `/bin/bash`.
; %I - Client IP; When Cli it's `local`. Priority value: HTTP_X_REAL_IP > HTTP_X_FORWARDED_FOR > REMOTE_ADDR
; %F - FileName:LineNo. Such as `UserService.php:118`.
; %U - MemoryUsage. byte. Call `zend_memory_usage`.
; %u - PeakMemoryUsage. byte. Call `zend_memory_peak_usage`.
; %C - `TODO` Class::Action. Such as `UserService::getUserInfo`.
;Default "%T | %L | %P | %Q | %t | %M"
seaslog.default_template = "%T | %L | %P | %Q | %t | %M"

; disting means rotating

;Switch use the logger with folder. 
;1-Y(Default) 0-N
seaslog.disting_folder = 1

;Switch use the logger with type.
;1-Y 0-N(Default)
seaslog.disting_type = 0

;Switch use the logger with hour.
;1-Y 0-N(Default)
seaslog.disting_by_hour = 0

;Switch use the log buffer with memory.
;1-Y 0-N(Default)
seaslog.use_buffer = 0

;The buffer size
seaslog.buffer_size = 100

;disable buffer in cli
;1-Y 0-N(Default)
seaslog.buffer_disabled_in_cli = 0

;Record logger level. 
;0-EMERGENCY 1-ALERT 2-CRITICAL 3-ERROR 4-WARNING 5-NOTICE 6-INFO 7-DEBUG 8-ALL
;Default 8 (All of them).
;
;   Tips: The configuration item has been changed since version 1.7.0.
;   Before version 1.7.0, the serverity of the levels is like this and 0 is the default value:
;   0-all 1-debug 2-info 3-notice 4-warning 5-error 6-critical 7-alert 8-emergency
;	which means the smaller the value is, the more levels would be taken and now it's the other way around.
seaslog.level = 8

;Log function recall depth
;Will affect variable `LineNo` in `%F`
;Default 0
seaslog.recall_depth = 0

;Automatic Record notice with default logger
;1-Y 0-N(Default)
seaslog.trace_notice = 0

;Automatic Record warning with default logger
;1-Y 0-N(Default)
seaslog.trace_warning = 0

;Automatic Record final error with default logger. 
;1-Y(Default) 0-N
seaslog.trace_error = 1

;Automatic Record exception with default logger. 
;1-Y 0-N(Default)
seaslog.trace_exception = 0

;Switch the Record Log Data Store.     
;1File 2TCP 3UDP (Switch default 1)
seaslog.appender = 1

;Record Log Retry Count 
;Default 0 (Do Not Retry)
seaslog.appender_retry = 0

;If you use  Record TCP or UDP, configure this remote ip.
;Default "127.0.0.1"
seaslog.remote_host = "127.0.0.1"

;If you use Record TCP or UDP, configure this remote port.
;Default 514
seaslog.remote_port = 514

;If you use Record TCP or UDP, configure this remote timeout.
;Default 1 second
seaslog.remote_timeout = 1

;Trim the \n and \r in log message.
;1-On 0-Off(Default)
seaslog.trim_wrap = 0

;Switch throw SeasLog exception.
;1-On(Default) 0-Off
seaslog.throw_exception = 1

;Switch ignore SeasLog warning.
;1-On(Default) 0-Off
seaslog.ignore_warning = 1
```

## Benchmark

![SeasLogVSlog4php](https://raw.githubusercontent.com/SeasX/SeasLog/master/tests/SeasLogVSlog4php.png)